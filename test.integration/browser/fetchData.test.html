<html>

<head>
    <meta charset="utf-8">
    <title>Connection callback test</title>
    <link href="./../../node_modules/mocha/mocha.css" rel="stylesheet" />
</head>

<body>
    <div id="mocha"></div>
    <script src="./../../node_modules/mocha/mocha.js"></script>
    <script src="./../../node_modules/dcorejs-lib/dist/bundle.js" type="text/javascript"></script>
    <script src="./../../dist/dcorejs.umd.js" type="text/javascript"></script>
    <script src="./../../node_modules/chai/chai.js" type="text/javascript"></script>
    <script>
        mocha.setup('bdd')
    </script>
    <script>
        const dcorejs_lib = window['dcorejs-lib'];
        const dcore_js = window['dcorejs'];

        const chainId = '17401602b201b3c45a3ad98afc6fb458f91f519bd30d1058adf6f2bed66376bc';
        const dcoreNetworkAddresses = ['wss://stage.decentgo.com:8090'];

        describe('Data fetch', () => {
            before(() => {
                dcore_js.initialize({
                    chainId: chainId,
                    dcoreNetworkWSPaths: dcoreNetworkAddresses
                }, dcorejs_lib);
            });

            it('request bad data', (done) => {
                dcore_js.account().getAccountById('0.0.0')
                    .catch(err => {
                        chai.should().exist(err);
                        done();
                    });
            });

            it('request correct data', (done) => {
                dcore_js.account().getAccountById('1.2.30')
                    .then(res => {
                        chai.expect(res.id).to.be.equal('1.2.30');
                        done();
                    });
            });
        });
        mocha.run()
    </script>
</body>

</html>